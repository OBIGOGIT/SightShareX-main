var COMMENT='\t<div id="bx-comment-%s" class="box-comment">\t\t<img class="img-circle img-sm" src="/images/role/%s.png" title="User Image">\x3c!-- role --\x3e\t\t<div class="comment-text">\t\t\t<span class="username">\t\t\t\t<span>%s</span> \x3c!-- user name --\x3e\t\t\t\t<span style="padding-left: 10px; display: %s;">\t\t\t\t\t<button onclick="uComment(\'%s\');" class="btn btn-obigo btn-xs" data-toggle="tooltip" title="Reply edit"><i class="fa fa-fw fa-pencil"></i></button>\t\t\t\t\t<button onclick="dComment(\'%s\')" class="btn btn-obigo btn-xs" data-toggle="tooltip" title="Reply delete"><i class="fa fa-fw fa-trash"></i></button>\t\t\t\t</span>\t\t\t\t<span class="text-muted pull-right">%s</span> \x3c!-- updated date --\x3e\t\t\t</span>\t\t\t<span id="sp-content-%s">%s</span> \x3c!-- content --\x3e\t\t\t<div id="dv-content-%s" class="input-group input-group-sm img-push" style="display: none;">\t\t\t\t<textarea style="height: 80px;" id="txt-content-%s" class="form-control" rows="3"></textarea>\t\t\t\t<span class="input-group-btn">\t\t\t\t\t<button onclick="uCommentSave(\'%s\');" class="btn btn-obigo btn-flat">Save</button>\t\t\t\t</span>\t\t\t</div>\t\t</div>\t</div>',
qnaDetail=function(){Log.d("qnaDetail() called...");var b=new URLSearchParams;b.append("qnaId",queryString("qnaId"));axios.post("/qna/detail",b).then(function(a){Log.d("response.data : ",a.data);a=a.data;null!=a&&(getID("hTitle").innerText=a.subject,getID("ddProductType").innerText=a.product_type_name,getID("ddUser").innerText=a.name,getID("ddCreated").innerText=utcToLoc(a.created),getID("ddUpdated").innerText=utcToLoc(a.updated),getID("ddContent").innerText=a.content)}).catch(function(a){Log.d("error=",
a)})},qnaComments=function(){Log.d("qnaComments() called...");getID("comment-result").innerHTML="";var b=new URLSearchParams;b.append("qnaId",queryString("qnaId"));axios.post("/qna/comment/list",b).then(function(a){Log.d("response.data : ",a.data);a=a.data;if(null!=a&&null!=a.length){var b=a.length,e="";if(0<a.length){for(var c=0;c<b;c++)e+=COMMENT.sprintf(a[c].id,a[c].role_id,a[c].name,USER_ID==a[c].account_seq?"":"none",a[c].id,a[c].id,utcToLoc(a[c].modified_date),a[c].id,a[c].content.replace(/\n/g,
"<br />"),a[c].id,a[c].id,a[c].id);getID("comment-result").innerHTML=e}}}).catch(function(a){Log.d("error=",a)})},uComment=function(b){Log.d("uComment() -> id=",b);var a="dv-content-"+b,d="sp-content-"+b;b="txt-content-"+b;""==getID(d).style.display?(getID(d).style.display="none",getID(a).style.display="",getID(b).value=getID(d).innerText):(getID(d).style.display="",getID(a).style.display="none")},uCommentSave=function(b){Log.d("uCommentSave() -> id=",b);var a=getVal("txt-content-"+b);if(""==a)modalAlert("Comments are required.");
else{var d=new URLSearchParams;d.append("commentId",b);d.append("content",a);axios.post("/qna/comment/modify",d).then(function(a){Log.d("response.data : ",a.data);qnaComments()}).catch(function(a){Log.d("error=",a)})}},dComment=function(b){var a=function(){var a=new URLSearchParams;a.append("commentId",b);axios.post("/qna/comment/delete",a).then(function(a){Log.d("response.data : ",a.data);qnaComments()}).catch(function(a){Log.d("error=",a)})};Log.d("dComment() -> id=",b);bootbox.confirm({title:"Confirmation",
message:"Do you really want to delete this reply ?",buttons:{confirm:{label:"Yes",className:"btn-primary"},cancel:{label:"No",className:"btn-primary"}},callback:function(b){Log.d("callback -> r:"+b);b&&a()}})};window.addEventListener("DOMContentLoaded",function(){Log.d("qnadetailview.js -> DOMContentLoaded() called...");qnaDetail();qnaComments()});getID("btnEdit").onclick=function(b){Log.d("qnadetailview.js -> btnEdit() called...");mv("/qna/modifyform.do?qnaId="+queryString("qnaId"))};
getID("btnList").onclick=function(b){Log.d("btnList() called...");mv("/qna/list.do")};getID("btnReply").onclick=function(b){Log.d("qnadetailview.js -> btnReply() called...");b=getVal("txtReply");if(""==b)modalAlert("Comments are required.");else{getID("txtReply").value="";var a=new URLSearchParams;a.append("qnaId",queryString("qnaId"));a.append("content",b);axios.post("/qna/comment/add",a).then(function(a){Log.d("response.data : ",a.data);qnaComments()}).catch(function(a){Log.d("error=",a)})}};
