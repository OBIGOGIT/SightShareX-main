var roleComboList=function(){Log.d("roleComboList() called...");axios.post("/common/role/clist").then(function(a){a=a.data;var c=a.length;Log.d("roleComboList() -> data : ",a);for(var b="",d=0;d<c;d++)b+='<option value="%s">%s</option>'.sprintf(a[d].role_id,a[d].role_name);getID("selRole").innerHTML+=b}).catch(function(a){Log.d("roleComboList() -> error=",a)})},roles={datas:[],bChanged:!1,getSelectRole:function(){showHide("table-list",!1);axios.post("/manage/role/resource/list").then(function(a){Log.d("getSelectRole -> response.data : ",
a.data);a=a.data;0>=a.length||(roles.setDatas(a),roles.getSelectedRole(getVal("selRole")),showHide("table-list",!0))}).catch(function(a){Log.d("error=",a)})},setDatas:function(a){roles.datas=[];var c=a.length;if(!(0>=c)){for(var b=0;b<c;b++)roles.datas.push({select:!1,res_id:a[b].res_id,menu:a[b].menu,sub_menu:a[b].sub_menu,res_name:a[b].res_name,res_url:a[b].res_url});Log.d("roles.datas=",roles.datas);roles.setUI()}},changeSelect:function(a,c){Log.d("roles.changeSelect() -> res_id=",a,"chk.checked",
c.checked);for(var b=0;b<this.datas.length;b++)if(this.datas[b].res_id==a){this.datas[b].select=c.checked;this.bChanged=!0;break}},setUI:function(){for(var a=getID("table-list-body").innerHTML="",c="",b=0;b<roles.datas.length;b++)c+=roles.datas[b].select?"<td><label class='ob-customcheck'><input type='checkbox' onclick='roles.changeSelect(%s, this)' style='display: none;' checked><span class='ob-checkmark'></span></label></td>".sprintf(roles.datas[b].res_id):"<td><label class='ob-customcheck'><input type='checkbox' onclick='roles.changeSelect(%s, this)' style='display: none;'><span class='ob-checkmark'></span></label></td>".sprintf(roles.datas[b].res_id),
c+="<td>%s</td>".sprintf(roles.datas[b].menu),c+="<td>%s</td>".sprintf(roles.datas[b].sub_menu),c+="<td>%s</td>".sprintf(roles.datas[b].res_name),c+="<td>%s</td>".sprintf(roles.datas[b].res_url),a+="<tr>%s</tr>".sprintf(c),c="";getID("table-list-body").innerHTML=a},getSelectedRole:function(a){if(""==a)Log.d("getSelectedRole() -> role_id : ",a);else{var c=new URLSearchParams;c.append("role_id",a);axios.post("/manage/role/resource/selected",c).then(function(a){Log.d("selectedcompany.do -> response.data : ",
a.data);a=a.data;var b=a.length;if(!(0>=a.length)){for(var c=0;c<roles.datas.length;c++)for(var e=0;e<b;e++)roles.datas[c].res_id==a[e].res_id&&(roles.datas[c].select=!0);roles.setUI()}}).catch(function(a){Log.d("roles.getSelectedRole() -> error=",a)})}},updateSelectedRole:function(){var a=new URLSearchParams;a.append("role_id",getVal("selRole"));a.append("curRoles",JSON.stringify(this.datas));axios.post("/manage/role/modify",a).then(function(a){Log.d("response.data : ",a.data);"ok"==a.data.result?
(Log.d("\uc800\uc7a5 \uc131\uacf5!"),modalAlert("Saving success!")):modalAlert("Saving failed!")}).catch(function(a){Log.d("roles.updateSelectedRole -> error=",a)})}};window.addEventListener("DOMContentLoaded",function(){Log.d("DOMContentLoaded() called...");roles.getSelectRole();roleComboList()});getID("selRole").onchange=function(a){Log.d("selRole() -> e : ",a);roles.getSelectRole()};getID("btnSave").onclick=function(a){Log.d("btnSave() -> e : ",a);roles.updateSelectedRole()};
