var COL_START=4,pageChange=function(a,b){Log.d("pageChange() -> page : ",a," size: ",b);noticeList(a)},noticeD=function(a){Log.d("noticeD() -> Id : ",a);mv("/notice/detail.do?seq_no="+a)},noticeList=function(a){getID("table-list-body").innerHTML="";var b=new URLSearchParams;b.append("type",getVal("selNoticeType"));null!=getID("selStatus")&&b.append("status",getVal("selStatus"));null!=getID("selCompany")&&b.append("company_id",getVal("selCompany"));0<getVal("txtStart").length?b.append("startDate",
locToUtc(getVal("txtStart")+" 00:00:00")):b.append("startDate","");0<getVal("txtEnd").length?b.append("endDate",locToUtc(getVal("txtEnd")+" 23:59:59")):b.append("endDate","");b.append("curPage",a);b.append("pageUnit",PAGE_UNIT);showHide("table-list",!1);scrollSave("my-scroll-pos");axios.post("/notice/list",b).then(function(c){Log.d("response.data : ",c.data);if(!(0>=c.data.length)){c=c.data;if(""==getID("table-list-head").innerHTML){for(var a=Object.getOwnPropertyNames(c[0]),b="",h=COL_START;h<a.length;h++)b=
h==COL_START||"Status"==a[h]?b+'<th style="text-align: center;">%s</th>'.sprintf(a[h]):b+"<th>%s</th>".sprintf(a[h]);a="<tr>%s</tr>".sprintf(b);getID("table-list-head").innerHTML=a}b=a="";h=c.length;for(var g=0;g<h;g++){for(var e=Object.getOwnPropertyNames(c[0]),d=COL_START;d<e.length;d++)b="No"==e[d]?b+'<td align="center">%s</td>'.sprintf(c[g][e[d]]):"Status"==e[d]?b+'<td align="center">%s</td>'.sprintf("1"==c[g][e[d]]?'<span class="label label-success">active</span>':'<span class="label label-warning">inactive</span>'):
"Subject"==e[d]?b+'<td class="col-xs-2 text"><span>%s</span></td>'.sprintf(c[g][e[d]]):"Content"==e[d]?b+'<td class="col-xs-4 text"><span>%s</span></td>'.sprintf(c[g][e[d]]):"Updated date"==e[d]?b+"<td><span>%s</span></td>".sprintf(utcToLoc(c[g][e[d]])):b+"<td><span>%s</span></td>".sprintf(c[g][e[d]]);a+='<tr style="cursor: pointer;" onclick="noticeD(\'%s\')">%s</tr>'.sprintf(c[g].seq_no,b);b=""}getID("table-list-body").innerHTML=a;a=c[0].page;c=Math.ceil(c[0].totalcnt/PAGE_UNIT);Log.d("curPage : ",
a);Log.d("pageCount : ",c);"undefined"!=typeof Pagination&&(Pagination._pageNum=c,Pagination._initPage=a,Pagination.Init(document.getElementById("pagination"),{size:Pagination._pageNum,page:Pagination._initPage,step:3}));showHide("table-list",!0);scrollRestore("my-scroll-pos")}}).catch(function(a){Log.d(a)})},noticeTypes=function(){Log.d("noticeTypes() called...");axios.post("/notice/type/clist.do").then(function(a){a=a.data;var b=a.length;Log.d("noticeTypes() -> data : ",a);for(var c="",f=0;f<b;f++)c+=
'<option value="%s">%s</option>'.sprintf(a[f].id,a[f].type);getID("selNoticeType").innerHTML+=c}).catch(function(a){Log.d("noticeTypes() -> error=",a)})},companies=function(){Log.d("companies() called...");axios.post("/common/company/clist").then(function(a){a=a.data;var b=a.length;Log.d("companies() -> data : ",a);for(var c="",f=0;f<b;f++)c+='<option value="%s">%s</option>'.sprintf(a[f].company_id,a[f].company_name);getID("selCompany").innerHTML+=c}).catch(function(a){Log.d("companies() -> error=",
a)})};window.addEventListener("DOMContentLoaded",function(){Log.d("DOMContentLoaded() called...");noticeList(1);noticeTypes();companies()});getID("btnSearch").onclick=function(a){Log.d("btnSearch() called...");noticeList(1)};
