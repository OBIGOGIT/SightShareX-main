var productTypes=function(){Log.d("productTypes() called...");axios.post("/qna/producttype/clist").then(function(b){b=b.data;var a=b.length;Log.d("productTypes() -> data : ",b);for(var c="",d=0;d<a;d++)c+='<option value="%s">%s</option>'.sprintf(b[d].product_type,b[d].product_value);getID("selProductType").innerHTML+=c;"I"!=queryString("mode")&&qnaDetailInfo()}).catch(function(b){Log.d("productTypes() -> error=",b)})},qnaDetailInfo=function(){Log.d("qnaDetailInfo() called...");var b=new URLSearchParams;
b.append("qnaId",queryString("qnaId"));Log.d("params : ",b);axios.post("/qna/detail",b).then(function(a){a=a.data;Log.d("qnaDetailInfo() -> data : ",a);null!=a&&(getID("selProductType").value=a.product_type_id,getID("txtSubject").value=a.subject,getID("txtContent").value=a.content,getID("txtCreated").value=utcToLoc(a.created),getID("txtUpdated").value=utcToLoc(a.updated),getID("txtUser").value=a.name,getID("hdnCreateId").value=a.create_id)}).catch(function(a){Log.d("qnaDetailInfo() -> error=",a)})};
window.addEventListener("DOMContentLoaded",function(){Log.d("qnaD.js -> DOMContentLoaded() called...");productTypes()});
getID("btnSave").onclick=function(b){Log.d("qnaD.js -> btnSave() called...");var a="";a=getVal("txtSubject");if(""==a)modalAlert("Subject is required.");else{var c=getVal("txtContent");""==c?modalAlert("Content is required."):(b=new URLSearchParams,b.append("subject",a),b.append("content",c),b.append("productType",getVal("selProductType")),a="","I"==queryString("mode")?a="/qna/add":(a=queryString("qnaId"),b.append("qnaId",a),b.append("createId",getVal("hdnCreateId")),a="/qna/modify"),axios.post(a,
b).then(function(a){Log.d("response.data : ",a.data);"failed"==a.data.result?null!=a.data.desc?modalAlert(a.data.desc):modalAlert("Processing failed."):"redirect"==a.data.result?mv(a.data.cmd):(Log.d("qnaD.js -> btnSave() ok"),mv("/qna/list.do"))}).catch(function(a){Log.d("btnSave() -> error=",a)}))}};getID("btnList").onclick=function(b){Log.d("qnaD.js -> btnList() called...");mv("/qna/list.do")};
if("I"!=queryString("mode")){var deleteQna=function(){var b=new URLSearchParams;b.append("qnaId",queryString("qnaId"));Log.d("params : ",b);axios.post("/qna/delete",b).then(function(a){Log.d("deleteQna() -> data : ",a.data);"ok"==a.data.result&&(Log.d("qnaD.js -> btnDelete() ok"),mv("/qna/list.do"))}).catch(function(a){Log.d("deleteQna() -> error=",a)})};getID("btnDelete").onclick=function(b){Log.d("qnaD.js -> btnDelete() called...");bootbox.confirm({title:"Confirmation",message:"Do you really want to delete this item ?",
buttons:{confirm:{label:"Yes",className:"btn-primary"},cancel:{label:"No",className:"btn-primary"}},callback:function(a){Log.d("callback -> r:"+a);a&&deleteQna()}})}};
