var COL_START=3,pageChange=function(a,b){Log.d("pageChange() -> page : ",a," size: ",b);qnaList(a)},qnaDetailView=function(a){Log.d("qnaD() -> Id : ",a);mv("/qna/detail.do?qnaId="+a)},qnaList=function(a){getID("table-list-body").innerHTML="";var b=new URLSearchParams;null!=getID("selCompany")&&b.append("companyId",getVal("selCompany"));b.append("productType",getVal("selProductType"));b.append("subject",getVal("txtSubject"));b.append("content",getVal("txtContent"));b.append("user",getVal("txtUser"));
0<getVal("txtStart").length?b.append("start",locToUtc(getVal("txtStart")+" 00:00:00")):b.append("start","");0<getVal("txtEnd").length?b.append("end",locToUtc(getVal("txtEnd")+" 23:59:59")):b.append("end","");b.append("curPage",a);b.append("pageUnit",PAGE_UNIT);showHide("table-list",!1);scrollSave("my-scroll-pos");axios.post("/qna/list",b).then(function(a){Log.d("response.data : ",a.data);if(!(0>=a.data.length)){a=a.data;if(""==getID("table-list-head").innerHTML){for(var c=Object.getOwnPropertyNames(a[0]),
b="",d=COL_START;d<c.length;d++)b=d==COL_START?b+'<th style="text-align: center;">%s</th>'.sprintf(c[d]):b+"<th>%s</th>".sprintf(c[d]);c="<tr>%s</tr>".sprintf(b);getID("table-list-head").innerHTML=c}b=c="";d=a.length;for(var f=0;f<d;f++){for(var g=Object.getOwnPropertyNames(a[0]),e=COL_START;e<g.length;e++)b=9==e?b+"<td><span>%s</span></td>".sprintf(utcToLoc(a[f][g[e]])):3==e?b+'<td align="center"><span>%s</span></td>'.sprintf(a[f][g[e]]):6==e?b+'<td class="col-xs-2 text"><span>%s</span></td>'.sprintf(a[f][g[e]]):
7==e?b+'<td class="col-xs-4 text"><span>%s</span></td>'.sprintf(a[f][g[e]]):b+"<td><span>%s</span></td>".sprintf(a[f][g[e]]);c+='<tr style="cursor: pointer;" onclick="qnaDetailView(\'%s\')">%s</tr>'.sprintf(a[f].id,b);b=""}getID("table-list-body").innerHTML=c;c=a[0].page;a=Math.ceil(a[0].totalcnt/PAGE_UNIT);Log.d("curPage : ",c);Log.d("pageCount : ",a);"undefined"!=typeof Pagination&&(Pagination._pageNum=a,Pagination._initPage=c,Pagination.Init(document.getElementById("pagination"),{size:Pagination._pageNum,
page:Pagination._initPage,step:3}));scrollRestore("my-scroll-pos");showHide("table-list",!0)}}).catch(function(a){Log.d("qnaList() -> error : ",a)})},productTypes=function(){Log.d("productTypes() called...");axios.post("/qna/producttype/clist").then(function(a){a=a.data;var b=a.length;Log.d("productTypes() -> data : ",a);for(var d="",c=0;c<b;c++)d+='<option value="%s">%s</option>'.sprintf(a[c].product_type,a[c].product_value);getID("selProductType").innerHTML+=d}).catch(function(a){Log.d("productTypes() -> error=",
a)})},companies=function(){Log.d("companies() called...");axios.post("/common/company/clist").then(function(a){a=a.data;var b=a.length;Log.d("companies() -> data : ",a);for(var d="",c=0;c<b;c++)d+='<option value="%s">%s</option>'.sprintf(a[c].company_id,a[c].company_name);getID("selCompany").innerHTML+=d}).catch(function(a){Log.d("companies() -> error=",a)})};window.addEventListener("DOMContentLoaded",function(){Log.d("DOMContentLoaded() called...");qnaList(1);companies();productTypes()});
getID("btnSearch").onclick=function(a){Log.d("btnSearch() called...");qnaList(1)};
