var COL_START=3,STATUS={INACTIVE:0,ACTIVE:1,BLOCKED:2},pageChange=function(a,b){Log.d("pageChange() -> page : ",a," size: ",b);accountList(a)},accountDetail=function(a){Log.d("companyDetail() -> accountSeq : ",a);mv("/manage/account/detail.do?accountSeq="+a)},accountList=function(a){getID("table-list-body").innerHTML="";var b=new URLSearchParams;b.append("email",getVal("txtEmail"));b.append("name",getVal("txtName"));b.append("company_id",getVal("selCompany"));b.append("role_id",getVal("selRole"));
b.append("status_id",getVal("selActive"));0<getVal("txtStart").length?b.append("start",locToUtc(getVal("txtStart")+" 00:00:00")):b.append("start","");0<getVal("txtEnd").length?b.append("end",locToUtc(getVal("txtEnd")+" 23:59:59")):b.append("end","");b.append("curPage",a);b.append("pageUnit",PAGE_UNIT);showHide("table-list",!1);scrollSave("my-scroll-pos");axios.post("/manage/account/list",b).then(function(c){Log.d("response.data : ",c.data);getID('total-count').innerHTML="0";if(!(0>=c.data.length)){c=c.data;0<c.length&&(getID("total-count").innerHTML=
c[0].totalcnt);if(""==getID("table-list-head").innerHTML){for(var a=Object.getOwnPropertyNames(c[0]),b="",g=COL_START;g<a.length;g++)b=g==COL_START||8==g||9==g?b+'<th style="text-align: center;">%s</th>'.sprintf(a[g]):b+"<th>%s</th>".sprintf(a[g]);a="<tr>%s</tr>".sprintf(b);getID("table-list-head").innerHTML=a}b=a="";g=c.length;for(var h=0;h<g;h++){for(var e=Object.getOwnPropertyNames(c[0]),d=COL_START;d<e.length;d++)if("Updated date"==e[d])b+="<td>%s</td>".sprintf(utcToLoc(c[h][e[d]]));else if("Status"==
e[d])switch(c[h][e[d]]){case STATUS.INACTIVE:b+='<td align="center"><span class="label label-warning">inactive</span></td>';break;case STATUS.ACTIVE:b+='<td align="center"><span class="label label-success">active</span></td>';break;case STATUS.BLOCKED:b+='<td align="center"><span class="label label-danger">blocked</span></td>'}else b="No"==e[d]||"Login fail"==e[d]?b+'<td align="center"><span>%s</span></td>'.sprintf(c[h][e[d]]):"User email"==e[d]||"Update email"==e[d]?b+'<td class="text col-xs-2"><span>%s</span></td>'.sprintf(c[h][e[d]]):
b+"<td><span>%s</span></td>".sprintf(c[h][e[d]]);a+='<tr style="cursor: pointer;" onclick="accountDetail(\'%s\')">%s</tr>'.sprintf(c[h].accountseq,b);b=""}getID("table-list-body").innerHTML=a;a=c[0].page;c=Math.ceil(c[0].totalcnt/PAGE_UNIT);Log.d("curPage : ",a);Log.d("pageCount : ",c);"undefined"!=typeof Pagination&&(Pagination._pageNum=c,Pagination._initPage=a,Pagination.Init(document.getElementById("pagination"),{size:Pagination._pageNum,page:Pagination._initPage,step:3}));scrollRestore("my-scroll-pos");
showHide("table-list",!0)}}).catch(function(a){Log.d("error : ",a)})},companies=function(){Log.d("companies() called...");axios.post("/common/company/clist").then(function(a){a=a.data;var b=a.length;Log.d("companies() -> data : ",a);for(var c="",f=0;f<b;f++)c+='<option value="%s">%s</option>'.sprintf(a[f].company_id,a[f].company_name);getID("selCompany").innerHTML+=c}).catch(function(a){Log.d("companies() -> error=",a)})},roles=function(){Log.d("roles() called...");axios.post("/common/role/clist").then(function(a){a=
a.data;var b=a.length;Log.d("roles() -> data : ",a);for(var c="",f=0;f<b;f++)c+='<option value="%s">%s</option>'.sprintf(a[f].role_id,a[f].role_name);getID("selRole").innerHTML+=c}).catch(function(a){Log.d("roles() -> error=",a)})};window.addEventListener("DOMContentLoaded",function(){Log.d("DOMContentLoaded() called...");companies();roles();accountList(1)});getID("btnSearch").onclick=function(a){accountList(1)};
